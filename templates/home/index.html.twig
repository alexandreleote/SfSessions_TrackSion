{% extends 'base.html.twig' %}

{% block title %}TrackSion - Home{% endblock %}

{% block body %}

    {% if app.user %}
        {% if (app.user.nom == null) or (app.user.prenom == null) %}
        <article class="main-index-container">

            <header class="main-header-container">
                <div class="main-header-title">
                    <h2>Bienvenue</h2>
                    <hr class="title-line">
                </div>
            </header>

            <p>Merci de bien vouloir renseigner vos informations personnelles.</p>

            <button class="btn">
                <a href="">Mettre à jour mes informations</a>
            </button>

        </article>
        {% else %}
    
    <article class="main-index-container">

        <header class="main-header-container">
            <div class="main-header-title">
                <h2>Bienvenue</h2>
                <hr class="title-line">
            </div>
        </header>

        <section class="main-section-container">

            <h3>Sessions en cours</h3>

            <div>
                {% for currentSession in currentSessions %}
                    
                    <div class="main-section-content">
                        <aside class="main-section-aside">
                            <h3>{{ currentSession.intitule }}</h3>
                            <p>Places restantes : <span>{{ currentSession.nbPlacesReservees }}</span>/{{ currentSession.nbPlacesTotal }}</p>
                            <p>Dates : <span>{{ currentSession}}</span></p>
                            <p>Référent : <a href="">{{ currentSession.formateur }}</a></p>
                        </aside>
                        <a class="link" href="{{ path('session_show', {'id' : currentSession.id }) }}"><i class="fa-solid fa-chevron-right"></i></a>
                    </div>
                
                {% endfor %}
            </div>
        </section>
        
        <section class="main-section-container">

            <h3>Sessions à venir</h3>

            <div>
                {% for nextSession in nextSessions %}
                    
                    <div class="main-section-content">
                        <aside class="main-section-aside">
                            <h3>{{ nextSession.intitule }}</h3>
                            <p>Places restantes : <span>{{ nextSession.nbPlacesReservees }}</span>/{{ nextSession.nbPlacesTotal }}</p>
                            <p>Dates : <span>{{ nextSession }}</span></p>
                            <p>Référent : <a href="">{{ nextSession.formateur }}</a></p>
                        </aside>
                        <a class="link" href="{{ path('session_show', {'id' : nextSession.id }) }}"><i class="fa-solid fa-chevron-right"></i></a>
                    </div>
                
                {% endfor %}
            </div>
        </section>

        <section class="main-section-container">

            <h3>Sessions terminées</h3>

            <div>
                {% for pastSession in pastSessions %}
                    
                    <div class="main-section-content">
                        <aside class="main-section-aside">
                            <h3>{{ pastSession.intitule }}</h3>
                            <p>Places restantes : <span>{{ pastSession.nbPlacesReservees }}</span>/{{ pastSession.nbPlacesTotal }}</p>
                            <p>Dates : <span>{{ pastSession }}</span></p>
                            <p>Référent : <a href="">{{ pastSession.formateur }}</a></p>
                        </aside>
                        <a class="link" href="{{ path('session_show', {'id' : pastSession.id }) }}"><i class="fa-solid fa-chevron-right"></i></a>
                    </div>
                
                {% endfor %}
            </div>
        </section>

    </article>

        {% endif %}

    {% else %}

        <article class="main-index-container">

            <header class="main-header-container">
                <div class="main-header-title">
                    <h2>Bienvenue</h2>
                    <hr class="title-line">
                </div>
            </header>

            <p>Pour pouvoir utiliser l'application, merci de bien vouloir vous connectez.</p>    

        </article>

    {% endif %}

{% endblock %}